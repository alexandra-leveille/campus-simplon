<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Vue JS - Section 7 - Simple Component</title>
    <script src="./node_modules/vue/dist/vue.js"></script>
    <link rel="stylesheet" href="../00-styles/styles.css">
    <script>
        window.onload = function start() {

            // ici on enregistre le component sous form d'objet
            // noter qu'on a retiré le sélecteur
            let cmp = {
                data: function () {
                    return {
                        status: "critical"
                    }
                },
                template: '<p>Server status: {{status}} (<button @click="toggleStatus" class="btn">change</button>)</p>',
                methods: {
                    toggleStatus: function() {
                        let newStatus = this.status === "critical" ? "normal" : "critical";
                        this.status = newStatus;
                    }
                }
            };

            new Vue({
                el: "#app1",
                components: {
                    // on référence le component créé, associé au sélecteur "my-cmp"
                    "my-cmp": cmp
                }
            });

            new Vue({
                el: "#app2"
            });
        };
    </script>
</head>

<body>
    <div id="app1">
        <my-cmp></my-cmp>
        <hr>
        <my-cmp></my-cmp>
    </div>
    <div id="app2">
        <!--  l'appel à <my-cmp> lève une erreur ici car il n'est pas référencé localement à cette instance de Vue()-->
        <my-cmp></my-cmp>
        <hr>
        <my-cmp></my-cmp>
    </div>
</body>

</html>
