<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Vue JS - Section 5.1 - The ViewJS Instance</title>
    <script src="./node_modules/vue/dist/vue.js"></script>
    <link rel="stylesheet" href="../00-styles/styles.css">
    <style>

    </style>
    <script>
        window.onload = function start() {

            let app1 = new Vue({
                data: {
                    title: "i'm app one",
                    showParag: false
                },
                methods: {
                    show: function() {
                        this.showParag = true;
                        this.title = "i'm app one";
                        console.log("$refs accède aux éléments du DOM");
                        console.log(this.$refs);
                        console.log(this.$refs.myButton);
                        this.$refs.myButton.textContent = "modified !";
                    }
                }
            });

            let app2 = new Vue({
                el: "#app2",
                data: {
                    title: "i'm app two"
                },
                methods: {
                    onChange: function() {
                        app1.title = "Title changed from outside the view instance";
                        // note : on accède à title sans passer par app1.data.title => raccourçi donné par VueJS
                    }
                }
            });

            app1.newProp = "ceci ne fonctionne pas dans l'instance de app1 pour les binding, watch, etc.";

            // ci-dessous, $mount() fonctionne comme la prop el du constructeur Vue()
            app1.$mount("#app1")
            console.log(app1);
            console.log(app2);

            setTimeout(function() {
                app1.title = "changed by timer";
            }, 2000);

            var app3 = new Vue({
                template: "<h1>hello, i'm app 3</h1>"
            })

            app3.$mount("#app3");
            // équivalent à =>
            // document.getElementById("app3").appendChild(app3.$el);
        };
    </script>
</head>

<body>
    <h1 class="title">The ViewJS Instance</h1>

    <div id="app1" class="app">
        <div>
            <p>{{title}}</p>
            <p v-if="showParag">this is not always displayed</p>
            <!--  IMPORTANT -->
            <!--  le <button> suivant implante l'attribut VueJS ref pour ajouter l'objet HTML à notre instance Vue, dans l'objet {$refs}, associé à la clé myButton-->
            <button class="btn" @click="show" ref="myButton">
                show paragraph
            </button>
        </div>
    </div>

    <div id="app2" class="app">
        <div>
            <span style="display: block;margin-bottom: 20px">{{title}}</span>
            <button @click="onChange" class="btn">
                change something in app 1
            </button>
        </div>
    </div>

    <div id="app3"></div>

</body>

</html>
